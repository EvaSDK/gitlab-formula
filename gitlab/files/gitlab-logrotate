# GitLab logrotate settings
# based on: http://stackoverflow.com/a/4883967

{% set root_dir = salt['pillar.get']('gitlab:lookup:root_dir', '/home/git') %}

{{ root_dir }}/gitlab/log/*.log {
    weekly
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    copytruncate
}

{{ root_dir }}/gitlab-shell/gitlab-shell.log {
    weekly
    missingok
    rotate 52
    compress
    delaycompress
    notifempty
    copytruncate
}

